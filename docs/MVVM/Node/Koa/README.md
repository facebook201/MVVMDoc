
# RESTful API



## RESTful 是什么

它是一种 万维网的风格，它的缩写是 Representational State Transfer（表象层状态转变）



* Representational ： 数据的表现形式（JSON、XML ...）
* State：当前状态或者数据
* Transfer：传输





## 六大原则



### 1、C-S架构

数据存储在 Server端，Client端只需要使用就行，两端分离有利于 client端代码的可可移植性，server 专注于数据存储，扩展性强，两端独立开发。



### 2、无状态

客户端的每一次请求带有充分的信息能够让服务端识别。请求所需的一些信息都包含在URL的查询参数、header、body，服务端能够根据请求的各种参数，无需保存客户端的状态，将响应正确返回给客户端。无状态的特征大大提高的服务端的健壮性和可拓展性。



### 3、统一的接口

这个才是REST架构的核心，统一的接口对于RESTful服务非常重要。客户端只需要关注实现接口就可以，接口的可读性加强，使用人员方便调用。



### 4、一致的数据格式

服务端返回的数据格式要么是XML，要么是Json（获取数据），或者直接返回状态码。



### 5、缓存

客户端可以缓存页面的响应内容。因此响应都应隐式或显式的定义为可缓存的，若不可缓存则要避免客户端在多次请求后用旧数据或脏数据来响应。管理得当的缓存会部分地或完全地除去客户端和服务端之间的交互，进一步改善性能和延展性



### 6、分层系统

* 每层只知道相邻的一层，后面是什么就不知道 
* 客户端不知道是和代理还是真实服务端通信
* 其它层：安全层、负载均衡、缓存层等等



github开放平台 [RESTful规范 ](https://developer.github.com/v3/)





## API 设计实践



* URI使用名字 尽量是复数 如 /users
* URI 使用嵌套表示关联关系 /users/12/repos/5
* HTTP 方法 GET/POST/PUT/DELETE



### 响应设计规范



* 查询
* 分页
* 字段过滤 返回指定的字段
* 状态码

### 安全

* HTTPS
* 登录鉴权
* 限流 限制请求次数



## HTTP options 方法的作用？



* 检测服务器所支持的请求方法

* CORS中的预请求

  

### allowedMethods 作用

* 响应options方法，告诉它所支持的请求方法
* 相应地返回 405 不允许（支持但是没有这样写）和 501 （内部没有实现这个请求方法 例如 LINK LOCK）没有实现





















